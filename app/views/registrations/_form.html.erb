
  <%= error_messages_for(f.object) %>
  <div id="map-canvas" style="height: 300px; width: 500px;"></div>

<div id="location_title"></div>

<div id="form_times" style="display:none">
    <h2>Great! When can you help?</h2>
    <p>Sign up for as many two-hour shifts as you like. Trust us, two hours making friends and wishing everyone &#8220;Happy Nametag Day!&#8221; goes really fast!</p>

    <p>If you have a bit more time, be a <b>coordinator</b>. This means you'll work a four-hour shift and come collect nametags from one of our distribution centers. Want to do that?</p>
  <label class="checkbox">
    <input id="member_leader" name="member[leader]" type="checkbox">Yes, I'll help coordinate!
  </label>

  
  <!-- TODO: add an on-submit check that a button value is one of the times in the db -->
<div class="btn-group" id="worker-group">
  <button id="slot1" type="button" class="btn empty" value="1" disabled="1">11am - 1pm</button>
  <button id="slot2" type="button" class="btn empty" value="2" disabled="1">1 - 3pm</button>
  <button id="slot3" type="button" class="btn empty" value="3" disabled="1">3 - 5pm</button>
</div>

<!-- Should only be visible if user clicks the "wanna be a leader" bit. -->
<div class="btn-group" id="leader-group" style="display: none;">
  <button id="leader_slot1" type="button" class="btn empty" value="4" disabled="1">9am - 1pm</button>
  <button id="leader_slot2" type="button" class="btn empty" value="5" disabled="1">1 - 5pm</button>
</div>

</div>
<div id="form_details" style="display:none">
  <h2>And one more thing...</h2>
  <p>We haven't met yet. What's your name?</p>

  <dl>
    <dt><%= f.label(:first_name, "First Name") %></dt>
    <dd><%= f.text_field(:first_name, :size => '60x10', :required => 'true') %></dd>
  </dl>

  <dl>
    <dt><%= f.label(:last_name, "Last Name") %></dt>
    <dd><%= f.text_field(:last_name, :size => '60x10', :required => 'true') %></dd>
  </dl>

  <dl>
    <dt><%= f.label(:email) %></dt>
    <dd><%= f.email_field(:email, :required => 'true') %></dd>
  </dl>


  <dl>
    <dt><%= f.label(:phone) %></dt>
    <dd><%= f.phone_field(:phone) %></dd>
  </dl>

  <%= fields_for "friends" do |friend| %>
    Invite some friends! We'll let them know about Nametag Day, and do our best to have you all working at the same spot on June 1.
    <span class="clearfix"></span>
    <div id="friends-emails">
      <% unless @friends %>
      <%= friend.email_field "emails", :name => 'friends[emails][]', :placeholder => "Friend's email" %>
      <% else %>
          <% for friends_email in @friends %>
            <%= friend.email_field "emails", :name => 'friends[emails][]', :value => friends_email.email %>
          <% end %>
      <% end %>
    </div>
    <span class="clearfix"></span>
    <%= link_to 'Add Another Friend', '#', :class => 'btn', :id => 'add-email' %>
  <% end %>

<span class="clearfix"></span>

<%= hidden_field_tag :registration_token, params[:token] %>
<%= hidden_field_tag :location_id, '' %>
<input type="hidden" id="times" name="times" value="1" />

<%= f.submit "I'm in!" %>

</div>


<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3H-4R18HiHxjI6X-Kr2CLGAwn7C679Sk&sensor=false&msid=213507925858041545730.0004d89bb157ad658e66c&ie=UTF8&ll=37.0625,-95.677068&spn=23.875,57.630033&t=m&z=8&output=embed"> 
</script>

<script type="text/javascript">
  $(document).ready(function() {
    $('#add-email').click(function(){
      $('#friends-emails').append("<input id='friends_emails' name='friends[emails][]' placeholder=\"Friend's email\" size='30' type='email'>")
      return false
    });
    
  });
  
  setUpButtons();
  loadMarkers();
  google.maps.event.addDomListener(window, 'load', initializeMap);
</script>